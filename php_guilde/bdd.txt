CREATE DATABASE guildSite;

use guildSite;

CREATE TABLE roleGameBean(
   idRoleGame INT AUTO_INCREMENT,
   roleGameName VARCHAR(50) NOT NULL,
   PRIMARY KEY(idRoleGame)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE gameBean(
   idGame INT AUTO_INCREMENT,
   gameName VARCHAR(100) NOT NULL,
   PRIMARY KEY(idGame)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE roleSiteBean(
   idRoleSite INT AUTO_INCREMENT,
   roleSiteName VARCHAR(50) NOT NULL,
   PRIMARY KEY(idRoleSite)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE userBean(
   idUser INT AUTO_INCREMENT,
   pseudo VARCHAR(50) NOT NULL,
   password VARCHAR(255) NOT NULL,
   mail VARCHAR(100),
   idRoleGame INT,
   idRoleSite INT,
   PRIMARY KEY(idUser),
   FOREIGN KEY(idRoleGame) REFERENCES roleGameBean(idRoleGame),
   FOREIGN KEY(idRoleSite) REFERENCES roleSiteBean(idRoleSite)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE classeGameBean(
   idClasseGame INT AUTO_INCREMENT,
   classeName VARCHAR(50) NOT NULL,
   classeDescription TEXT NOT NULL,
   idGame INT,
   PRIMARY KEY(idClasseGame),
   FOREIGN KEY(idGame) REFERENCES gameBean(idGame)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE infoGameBean(
   idInfo INT AUTO_INCREMENT,
   titleInfo VARCHAR(100) NOT NULL,
   contentInfo TEXT NOT NULL,
   idUser INT,
   PRIMARY KEY(idInfo),
   FOREIGN KEY(idUser) REFERENCES userBean(idUser)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE guildActivityBean(
   idActivity INT AUTO_INCREMENT,
   activityName VARCHAR(50) NOT NULL,
   activityDescription VARCHAR(150) NOT NULL,
   activityDate VARCHAR(100) NOT NULL,
   idUser INT,
   PRIMARY KEY(idActivity),
   FOREIGN KEY(idUser) REFERENCES userBean(idUser)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE acquerir(
   idUser INT,
   idClasseGame INT,
   PRIMARY KEY(idUser, idClasseGame),
   FOREIGN KEY(idUser) REFERENCES userBean(idUser),
   FOREIGN KEY(idClasseGame) REFERENCES classeGameBean(idClasseGame)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE sinscrire(
   idUser INT,
   idActivity INT,
   PRIMARY KEY(idUser, idActivity),
   FOREIGN KEY(idUser) REFERENCES userBean(idUser),
   FOREIGN KEY(idActivity) REFERENCES guildActivityBean(idActivity)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE recevoir(
   idActivity INT,
   idGame INT,
   PRIMARY KEY(idActivity, idGame),
   FOREIGN KEY(idActivity) REFERENCES guildActivityBean(idActivity),
   FOREIGN KEY(idGame) REFERENCES gameBean(idGame)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE contenir(
   idInfo INT,
   idGame INT,
   PRIMARY KEY(idInfo, idGame),
   FOREIGN KEY(idInfo) REFERENCES infoGameBean(idInfo),
   FOREIGN KEY(idGame) REFERENCES gameBean(idGame)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE jouer(
   idUser INT,
   idGame INT,
   PRIMARY KEY(idUser, idGame),
   FOREIGN KEY(idUser) REFERENCES userBean(idUser),
   FOREIGN KEY(idGame) REFERENCES gameBean(idGame)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;